!function(a){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=a();else if("function"==typeof define&&define.amd)define([],a);else{var b;"undefined"!=typeof window?b=window:"undefined"!=typeof global?b=global:"undefined"!=typeof self&&(b=self),b.papa=a()}}(function(){return function a(b,c,d){function e(g,h){if(!c[g]){if(!b[g]){var i="function"==typeof require&&require;if(!h&&i)return i(g,!0);if(f)return f(g,!0);throw new Error("Cannot find module '"+g+"'")}var j=c[g]={exports:{}};b[g][0].call(j.exports,function(a){var c=b[g][1][a];return e(c?c:a)},j,j.exports,a,b,c,d)}return c[g].exports}for(var f="function"==typeof require&&require,g=0;g<d.length;g++)e(d[g]);return e}({1:[function(a,b){!function(){"use strict";var c=a("./papa/create_namespace"),d=a("./papa/create_mixin"),e=a("./papa/create_module"),f={VERSION:"0.4.2",Namespace:c.Namespace,CreateObjPath:c.CreateObjPath};Object.defineProperty(f,"_papa",{value:f}),a("./papa/log")(f),f.Module=e(f),f.Mixin=d(f),a("./papa/events")(f),a("./papa/object_directory.coffee")(f),b.exports=f}()},{"./papa/create_mixin":2,"./papa/create_module":3,"./papa/create_namespace":4,"./papa/events":5,"./papa/log":6,"./papa/object_directory.coffee":7}],2:[function(a,b){!function(){"use strict";var c=a("./create_namespace"),d=a("./registry");b.exports=function(a){function b(a,b,c){return Object.create(null,{self:{enumerable:!0,value:a},exports:{enumerable:!0,value:b},conf:{enumerable:!0,value:c},current:{enumerable:!0,get:function(){return a.papa.instance}}})}function e(d,e,h){var i=e;e.papa&&e.papa.instance&&(i=e.papa.instance);var j=a._mixins_registry.findAll(d);if(Array.isArray(j)&&j.length>0){if(e.papa||(Object.defineProperty(e,"papa",{value:Object.create(null)}),e.papa.instance=i,e.papa.apiInstance=e,e.papa.kindOf=function(a){return e.papa.mixins?e.papa.mixins.indexOf(a)>-1:!1}),e.papa.mixins){if(e.papa.mixins.indexOf(d)>-1)return;e.papa.mixins.push(d)}else e.papa.mixins=[d];j.forEach(function(j){var k,l;if(Array.isArray(j.dependsOn)?j.dependsOn.forEach(function(a){g(a,e,h)}):"string"==typeof j.dependsOn&&g(j.dependsOn,e,h),"object"==typeof j.defaults)for(k in j.defaults)if(j.defaults.hasOwnProperty(k)&&"undefined"==typeof i[k]){if("function"==typeof j.defaults[k])try{l=j.defaults[k].call(i,i)}catch(m){f.error(m)}else l=j.defaults[k];i[k]=l}if("object"==typeof j.define)for(k in j.define)if(j.define.hasOwnProperty(k)&&"function"==typeof j.define[k])try{i[k]=j.define[k].call(i,i)}catch(m){f.error(m)}var n="string"==typeof j.namespace?c.CreateObjPath(j.namespace,e):e;if("object"==typeof j.exports)for(k in j.exports)j.exports.hasOwnProperty(k)&&(n[k]=function(a,b){return function(){return a.apply(b.papa.instance,arguments)}}(j.exports[k],e));if("object"==typeof j.on){i.papa.kindOf("events")||g("events",e,h);for(k in j.on)j.on.hasOwnProperty(k)&&("function"==typeof j.on[k]?i.on(k,j.on[k]):Array.isArray(j.on[k])&&i.on(k,j.on[k][0],j.on[k][1]))}if("function"==typeof j.initialize){var o=a._mixins_registry.findOne(h,!0);o||(o=a._mixins_registry.findOne(d,!0)),o&&!o.papa&&(o.papa=a);try{j.initialize.call(i,b(i,n,o))}catch(m){f.error(m)}}})}}var f=a._papa.Logger;d(a,"_mixins_registry");var g=function(a,b,c){return Array.isArray(c)&&(c=c[0]),Array.isArray(a)?a.forEach(function(d){e(d,b,c||a)}):e(a,b,c||a),b},h=function(a,b,c){if("undefined"==typeof b)return g(a,Object.create(null));var d;return c===!1?d=b:(d=Object.create(b),d.papa&&(d.papa.instance=d)),g(a,d)},i=function(b,c){var d=c();"function"==typeof d&&(d={initialize:d}),"string"!=typeof d.objectTypeName&&(d.objectTypeName=b),a._mixins_registry.push(b,d),d.factory&&a.Namespace("string"==typeof d.factory?d.factory:b+".create",function(){return function(a){return h(b,a)}})};return i.Include=g,i.NewObject=h,i}}()},{"./create_namespace":4,"./registry":8}],3:[function(a,b){!function(){"use strict";var c=a("./create_namespace"),d=a("./create_mixin"),e=a("./registry");b.exports=function(a){function b(){var b={};return Object.defineProperty(b,"_papa",{value:a}),b.Namespace=function(a,d){return c.Namespace(a,b,d)},b.Mixin=d(b),b}return e(a,"_modules_registry"),function(c){var d=a._modules_registry.get(c);return d||(d=a._modules_registry.set(c,b())),d}}}()},{"./create_mixin":2,"./create_namespace":4,"./registry":8}],4:[function(a,b){!function(){"use strict";var c=function(a,b,c){var d,e,f=a.split("."),g=b;for(d=0;d<f.length-1;d++)e=f[d],"undefined"==typeof g[e]&&(g[e]=Object.create(null)),g=g[e];return e=f[f.length-1],"function"!=typeof c?("undefined"==typeof g[e]&&(g[e]=Object.create(null)),g[e]):void c(g,e)},d=function(b,d,e){2===arguments.length&&(e=d,d=a("./root")()),c(b,d,function(a,c){if("function"==typeof e){"undefined"==typeof a[c]&&(a[c]={});var d=e(a[c]);"undefined"!=typeof d&&(a[c]=d)}else{if("undefined"!=typeof a[c])throw new Error("could not override object path: "+b);a[c]=e}})};b.exports={CreateObjPath:c,Namespace:d}}()},{"./root":9}],5:[function(a,b){!function(){"use strict";b.exports=function(a){a.Mixin("events",function(){return function(a){var b={_id:0};a.exports.on=function(a,c,d){2===arguments.length&&(d=c,c=0);var e=b[a]||(b[a]=[]),f=++b._id;return e.push({id:f,fn:d,prio:c||0}),e.sort(function(a,b){return b.prio-a.prio}),f},a.exports.off=function(a){var c,d,e,f,g=Object.keys(b);for(e=0;e<g.length;e++)for(f=b[g[e]],d=0;d<f.length;d++)if(c=f[d],c.id===a)return void f.splice(d,1)},a.exports.emit=function(c){var d=Array.prototype.slice.call(arguments,1);c in b&&b[c].forEach(function(b){b.fn.apply(a.current,d)})}}})}}()},{}],6:[function(a,b){!function(){"use strict";b.exports=function(b){var c=b.Logger={};c.options={DEBUG:!0,INFO:!0,WARN:!0,ERROR:!0};var d=function(){return c.options.DEBUG||c.options.INFO||c.options.WARN||c.options.ERROR},e=a("./root")();"undefined"!=typeof e.console?(c.debug=function(){c.options.DEBUG&&console.debug.apply(console,arguments)},c.info=function(){c.options.INFO&&console.info.apply(console,arguments)},c.warn=function(){c.options.WARN&&console.warn.apply(console,arguments)},c.error=function(){c.options.ERROR&&console.error.apply(console,arguments)},c.group="function"==typeof e.console.group?function(a,b){var c=d();c&&console.group(a),b(),c&&console.groupEnd()}:function(a,b){b()}):c.debug=c.info=c.warn=c.error=function(){}}}()},{"./root":9}],7:[function(a,b){b.exports=function(a){return a.Mixin("object_directory",function(){var a;return a=function(a,b){if(a.name){if(null!=b.objectDirectory.obj_directory[a.name])throw new Error("object name '"+a.name+"' already exists for "+b.objectTypeName);return a.name}return b.objectDirectory.cur_obj_id++,""+b.objectTypeName+"@"+b.objectDirectory.cur_obj_id},{initialize:function(b){var c,d,e;return(d=b.conf).objectDirectory||(d.objectDirectory={obj_directory:{},latest_obj:null,cur_obj_id:0}),b.self.name=a(b.current,b.conf),e=b.conf.objectDirectory,e.obj_directory[b.self.name]=b.self,c=function(a){return e.obj_directory[a]},e.static_finder_created||(e.static_finder_created=!0,b.conf.papa.Namespace(b.conf.objectTypeName,function(a){a.get=c,a.find=c,a.latest=function(){return e.latest_obj}})),e.latest_obj=b.self}}})}},{}],8:[function(a,b){!function(){"use strict";function a(a){this.parent=a,this.data=new Map}a.prototype.get=function(a){var b=this.data[a];return"undefined"==typeof b&&this.parent?this.parent.get(a):b},a.prototype.findAll=function(a,b){var c,d=[];return this.parent&&!b&&(d=d.concat(this.parent.findAll(a))),c=this.data[a],Array.isArray(c)&&(d=d.concat(c)),this.parent&&b&&(d=d.concat(this.parent.findAll(a))),d},a.prototype.findOne=function(a,b){if(!Array.isArray(a))return this.findAll(a,b)[0];var c,d;for(c=0;c<a.length;c++)if(d=this.findOne(a[c],b))return d},a.prototype.push=function(a,b){var c=this.data[a];if("undefined"==typeof c)c=this.data[a]=[];else if(!Array.isArray(c))throw new Error("could not push to",typeof c,"value");return c.push(b),b},a.prototype.exists=function(a){return"undefined"!=typeof this.get(a)},a.prototype.set=function(a,b){return this.data[a]=b,b},b.exports=function(b,c){b._papa.hasOwnProperty(c)||Object.defineProperty(b._papa,c,{value:new a}),b._papa!==b&&(b.hasOwnProperty(c)||Object.defineProperty(b,c,{value:new a(b._papa[c])}))}}()},{}],9:[function(a,b){(function(a){!function(){"use strict";b.exports=function(){var b;try{b=window}catch(c){}if("undefined"==typeof b)try{b=a}catch(c){}return"undefined"==typeof b&&(b=this),b}}()}).call(this,"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}]},{},[1])(1)});